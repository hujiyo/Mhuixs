[ğŸ‘ˆ è¿”å›ä¸»é¡¹ç›®è¯´æ˜æ–‡æ¡£](../../README.md)

# Mhuixs æ•°æ®åº“å®¢æˆ·ç«¯

æ¬¢è¿ä½¿ç”¨ Mhuixs æ•°æ®åº“å®¢æˆ·ç«¯ï¼æœ¬ç›®å½•åŒ…å«ä¸‰ä¸ªç‰ˆæœ¬çš„å®¢æˆ·ç«¯å®ç°ï¼šCã€C++ å’Œ Pythonã€‚

## ç›®å½•ç»“æ„

```
muixclt/
â”œâ”€â”€ C/                  # Cç‰ˆæœ¬å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ clt.c          # ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ pkg.c          # æ•°æ®åŒ…å¤„ç†
â”‚   â”œâ”€â”€ pkg.h          # æ•°æ®åŒ…å¤„ç†å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ lexer.c        # è¯æ³•åˆ†æå™¨
â”‚   â”œâ”€â”€ lexer.h        # è¯æ³•åˆ†æå™¨å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ logo.c         # Logoæ˜¾ç¤º
â”‚   â”œâ”€â”€ logo.h         # Logoæ˜¾ç¤ºå¤´æ–‡ä»¶
â”‚   â””â”€â”€ Makefile       # æ„å»ºè„šæœ¬
â”œâ”€â”€ Cpp/               # C++ç‰ˆæœ¬å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ clt.cpp        # ä¸»ç¨‹åº
â”‚   â””â”€â”€ CMakeLists.txt # æ„å»ºè„šæœ¬
â”œâ”€â”€ Python/            # Pythonç‰ˆæœ¬å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ clt.py         # ä¸»ç¨‹åº
â”‚   â””â”€â”€ requirements.txt # ä¾èµ–æ–‡ä»¶
â”œâ”€â”€ build.sh           # æ€»æ„å»ºè„šæœ¬
â”œâ”€â”€ NAQL.txt          # NAQLè¯­è¨€æ–‡æ¡£
â””â”€â”€ README.md         # è¯´æ˜æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## å¿«é€Ÿå¼€å§‹

### 1. æ£€æŸ¥ä¾èµ–å¹¶æ„å»ºæ‰€æœ‰ç‰ˆæœ¬

```bash
# è¿›å…¥å®¢æˆ·ç«¯ç›®å½•
cd muixclt

# æ„å»ºæ‰€æœ‰ç‰ˆæœ¬çš„å®¢æˆ·ç«¯
./build.sh

# æˆ–è€…æ£€æŸ¥ä¾èµ–
./build.sh deps
```

### 2. å•ç‹¬æ„å»ºç‰¹å®šç‰ˆæœ¬

```bash
# ä»…æ„å»ºCç‰ˆæœ¬
./build.sh c

# ä»…æ„å»ºC++ç‰ˆæœ¬  
./build.sh cpp

# ä»…å‡†å¤‡Pythonç‰ˆæœ¬
./build.sh python
```

### 3. è¿è¡Œå®¢æˆ·ç«¯

```bash
# Cç‰ˆæœ¬
./C/mhuixs-client

# C++ç‰ˆæœ¬
./Cpp/build/bin/mhuixs-client-cpp

# Pythonç‰ˆæœ¬
python3 ./Python/clt.py
```

## ç³»ç»Ÿè¦æ±‚

### åŸºæœ¬ä¾èµ–

- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu/Debian/CentOS/RHEL)
- **ç¼–è¯‘å™¨**: GCC 4.9+ æˆ– Clang 3.5+
- **æ„å»ºå·¥å…·**: Make, CMake 3.12+
- **Python**: Python 3.6+

### å¼€å‘åº“

- **OpenSSL**: libssl-dev (Ubuntu/Debian) æˆ– openssl-devel (CentOS/RHEL)
- **Readline**: libreadline-dev (Ubuntu/Debian) æˆ– readline-devel (CentOS/RHEL)

### å®‰è£…ä¾èµ–å‘½ä»¤

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install build-essential cmake python3 libssl-dev libreadline-dev
```

**CentOS/RHEL:**
```bash
sudo yum install gcc gcc-c++ cmake python3 openssl-devel readline-devel
```

## è¯¦ç»†æ„å»ºè¯´æ˜

### C ç‰ˆæœ¬

Cç‰ˆæœ¬ä½¿ç”¨ä¼ ç»Ÿçš„Makefileæ„å»ºç³»ç»Ÿï¼š

```bash
cd C
make all          # ç¼–è¯‘
make clean        # æ¸…ç†
make install-deps # å®‰è£…ä¾èµ–ï¼ˆUbuntu/Debianï¼‰
make run          # ç¼–è¯‘å¹¶è¿è¡Œ
make help         # æ˜¾ç¤ºå¸®åŠ©
```

### C++ ç‰ˆæœ¬

C++ç‰ˆæœ¬ä½¿ç”¨CMakeæ„å»ºç³»ç»Ÿï¼š

```bash
cd Cpp
mkdir build && cd build
cmake -DCMAKE_BUILD_TYPE=Release ..
make -j$(nproc)
```

æˆ–ä½¿ç”¨æ„å»ºè„šæœ¬ï¼š
```bash
./build.sh cpp
```

### Python ç‰ˆæœ¬

Pythonç‰ˆæœ¬ä½¿ç”¨æ ‡å‡†åº“ï¼Œæ— éœ€ç¼–è¯‘ï¼š

```bash
cd Python
chmod +x clt.py
python3 clt.py
```

## ä½¿ç”¨è¯´æ˜

### å‘½ä»¤è¡Œé€‰é¡¹

æ‰€æœ‰ç‰ˆæœ¬çš„å®¢æˆ·ç«¯éƒ½æ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼š

```bash
-h, --help              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
-v, --version           æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
-s, --server <IP>       æŒ‡å®šæœåŠ¡å™¨IPåœ°å€ (é»˜è®¤: 127.0.0.1)
-p, --port <ç«¯å£>       æŒ‡å®šæœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 18482)
-f, --file <æ–‡ä»¶>       ä»æ–‡ä»¶æ‰¹é‡æ‰§è¡ŒæŸ¥è¯¢
-V, --verbose           è¯¦ç»†æ¨¡å¼
-q, --quiet             é™é»˜æ¨¡å¼
```

### äº¤äº’å¼å‘½ä»¤

åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œæ”¯æŒä»¥ä¸‹å†…ç½®å‘½ä»¤ï¼š

```
\q, \quit              é€€å‡ºå®¢æˆ·ç«¯
\h, \help              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
\c, \connect           è¿æ¥åˆ°æœåŠ¡å™¨
\d, \disconnect        æ–­å¼€è¿æ¥
\s, \status            æ˜¾ç¤ºè¿æ¥çŠ¶æ€
\v, \verbose           åˆ‡æ¢è¯¦ç»†æ¨¡å¼
\clear                 æ¸…å±
```

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºæœ¬ä½¿ç”¨

```bash
# å¯åŠ¨äº¤äº’æ¨¡å¼ï¼ˆè‡ªåŠ¨è¿æ¥åˆ°æœ¬åœ°æœåŠ¡å™¨ï¼‰
./C/mhuixs-client

# è¿æ¥åˆ°æŒ‡å®šæœåŠ¡å™¨
./C/mhuixs-client -s 192.168.1.100 -p 18482

# æ‰¹é‡æ‰§è¡ŒæŸ¥è¯¢æ–‡ä»¶
./C/mhuixs-client -f queries.naql

# è¯¦ç»†æ¨¡å¼
./C/mhuixs-client -v
```

#### NAQL æŸ¥è¯¢ç¤ºä¾‹

```sql
# åˆ›å»ºè¡¨
HOOK TABLE users;

# æ·»åŠ å­—æ®µ
FIELD ADD id i4 PKEY;
FIELD ADD name str NOTNULL;
FIELD ADD age i4;
FIELD ADD email str UNIQUE;

# æ’å…¥æ•°æ®
ADD 1 'å¼ ä¸‰' 25 'zhangsan@example.com';
ADD 2 'æå››' 30 'lisi@example.com';

# æŸ¥è¯¢æ•°æ®
GET;                        # æŸ¥è¯¢æ‰€æœ‰æ•°æ®
WHERE name == 'å¼ ä¸‰';       # æ¡ä»¶æŸ¥è¯¢
GET FIELD name;             # æŸ¥è¯¢æŒ‡å®šå­—æ®µ

# æ›´æ–°æ•°æ®
SET 1 2 30;                 # æ›´æ–°ç¬¬1è¡Œç¬¬2ä¸ªå­—æ®µä¸º30

# åˆ é™¤æ•°æ®
DEL 2;                      # åˆ é™¤ç¬¬2è¡Œ
```

#### æ‰¹å¤„ç†æ–‡ä»¶ç¤ºä¾‹

åˆ›å»ºæ–‡ä»¶ `example.naql`ï¼š

```sql
# ç¤ºä¾‹æ‰¹å¤„ç†æ–‡ä»¶
HOOK TABLE test_table;
FIELD ADD id i4;
FIELD ADD name str;
ADD 1 'test1';
ADD 2 'test2';
GET;
```

æ‰§è¡Œæ‰¹å¤„ç†ï¼š

```bash
./C/mhuixs-client -f example.naql
```

## ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | Cç‰ˆæœ¬ | C++ç‰ˆæœ¬ | Pythonç‰ˆæœ¬ |
|------|-------|---------|------------|
| æ€§èƒ½ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| å†…å­˜å ç”¨ | â­â­â­â­â­ | â­â­â­â­ | â­â­ |
| æ˜“äºç»´æŠ¤ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| è·¨å¹³å° | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| å¼€å‘æ•ˆç‡ | â­â­ | â­â­â­ | â­â­â­â­â­ |

### é€‰æ‹©å»ºè®®

- **Cç‰ˆæœ¬**: é€‚åˆå¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå¦‚åµŒå…¥å¼ç³»ç»Ÿ
- **C++ç‰ˆæœ¬**: å¹³è¡¡æ€§èƒ½å’Œå¼€å‘æ•ˆç‡ï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨
- **Pythonç‰ˆæœ¬**: é€‚åˆå¿«é€ŸåŸå‹å¼€å‘ã€è„šæœ¬åŒ–ä½¿ç”¨å’Œå­¦ä¹ 

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼–è¯‘é”™è¯¯**: ç¼ºå°‘ä¾èµ–åº“
   ```bash
   # æ£€æŸ¥ä¾èµ–
   ./build.sh deps
   
   # å®‰è£…ä¾èµ–
   sudo apt-get install libssl-dev libreadline-dev  # Ubuntu/Debian
   sudo yum install openssl-devel readline-devel    # CentOS/RHEL
   ```

2. **è¿æ¥å¤±è´¥**: æœåŠ¡å™¨æœªå¯åŠ¨æˆ–ç½‘ç»œé—®é¢˜
   ```bash
   # æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
   telnet 127.0.0.1 18482
   
   # ä½¿ç”¨è¯¦ç»†æ¨¡å¼æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
   ./C/mhuixs-client -v
   ```

3. **æƒé™é”™è¯¯**: æ‰§è¡Œæƒé™ä¸è¶³
   ```bash
   chmod +x build.sh
   chmod +x Python/clt.py
   ```

### è°ƒè¯•æ¨¡å¼

```bash
# Cç‰ˆæœ¬è°ƒè¯•
cd C
make debug
gdb ./mhuixs-client

# C++ç‰ˆæœ¬è°ƒè¯•
cd Cpp/build
make debug_run

# Pythonç‰ˆæœ¬è°ƒè¯•
python3 -m pdb Python/clt.py
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. ä¿®æ”¹å¯¹åº”ç‰ˆæœ¬çš„æºä»£ç 
2. æ›´æ–°æ„å»ºè„šæœ¬ï¼ˆå¦‚éœ€è¦ï¼‰
3. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°æ–‡æ¡£

### ä»£ç è§„èŒƒ

- **Cç‰ˆæœ¬**: éµå¾ªC99æ ‡å‡†
- **C++ç‰ˆæœ¬**: éµå¾ªC++17æ ‡å‡†ï¼Œä½¿ç”¨ç°ä»£C++ç‰¹æ€§
- **Pythonç‰ˆæœ¬**: éµå¾ªPEP 8è§„èŒƒ

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./build.sh test

# å•ç‹¬æµ‹è¯•æŸä¸ªç‰ˆæœ¬
./C/mhuixs-client --help
python3 ./Python/clt.py --help
./Cpp/build/bin/mhuixs-client-cpp --help
```

## åè®®è¯´æ˜

å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä½¿ç”¨è‡ªå®šä¹‰çš„äºŒè¿›åˆ¶åè®®é€šä¿¡ï¼š

- **ä¼ è¾“**: SSL/TLSåŠ å¯†çš„TCPè¿æ¥
- **ç«¯å£**: 18482 (é»˜è®¤)
- **åŒ…æ ¼å¼**: åŒ…å¤´(16å­—èŠ‚) + æ•°æ® + æ ¡éªŒå’Œ(4å­—èŠ‚)
- **å­—èŠ‚åº**: ç½‘ç»œå­—èŠ‚åº (å¤§ç«¯)

è¯¦ç»†åè®®è§„èŒƒè¯·å‚è€ƒæºä»£ç ä¸­çš„ `pkg.h` æˆ– `pkg.c` æ–‡ä»¶ã€‚

## è®¸å¯è¯

ç‰ˆæƒæ‰€æœ‰ (c) Mhuixs-team 2024  
è®¸å¯è¯åè®®: ä»»ä½•äººæˆ–ç»„ç»‡åœ¨æœªç»ç‰ˆæƒæ‰€æœ‰è€…åŒæ„çš„æƒ…å†µä¸‹ç¦æ­¢ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘æ­¤ä½œå“

## è”ç³»æ–¹å¼

- **Email**: hj18914255909@outlook.com
- **å¾®ä¿¡**: wx17601516389
- **é¡¹ç›®ä¸»é¡µ**: [GitHub Repository]

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12-XX)
- âœ… å®ŒæˆCç‰ˆæœ¬å®¢æˆ·ç«¯
- âœ… å®ŒæˆC++ç‰ˆæœ¬å®¢æˆ·ç«¯
- âœ… å®ŒæˆPythonç‰ˆæœ¬å®¢æˆ·ç«¯
- âœ… å®ç°SSLåŠ å¯†é€šä¿¡
- âœ… æ”¯æŒNAQLæŸ¥è¯¢è¯­è¨€
- âœ… æä¾›äº¤äº’å¼å’Œæ‰¹å¤„ç†æ¨¡å¼
- âœ… è·¨å¹³å°æ„å»ºæ”¯æŒ
- âœ… å®Œæ•´çš„æ–‡æ¡£å’Œç¤ºä¾‹ 